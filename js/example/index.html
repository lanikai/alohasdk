<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AlohaSDK JS Example Page</title>
  <style>
    form.options {
      display: grid;
      grid-template-columns: 144px max-content;
      grid-gap: 5px;
      line-height: 2em;
    }
    form.options label {
      text-align: right;
    }
  </style>
</head>
<body>
  <form class="options" id="form">
    <label>Device ID:</label>
    <input type="text" name="deviceId" />

    <label>Auth token:</label>
    <input type="text" name="authToken" />

    <label>Signal server:</label>
    <input type="text" name="signalServer" value="wss://api.oahu.lanikailabs.com" />

    <span></span>
    <input type="submit" value="Start call" />
  </form>

  <video id="remoteVideo" autoplay controls muted playsinline></video>

  <!-- require-stub provides a hacky implementation of require() that runs
    directly in the browser. Do not use this in production. -->
  <script src="/node_modules/require-stub/index.js"></script>

  <script>
    const alohasdk = require('alohasdk');

    const form = document.getElementById('form');
    const remoteVideo = document.getElementById('remoteVideo');

    form.onsubmit = function(e) {
      e.preventDefault();
      var pc = alohasdk.Call({
        deviceId: form.elements.deviceId.value,
        authToken: form.elements.authToken.value,
        signalServer: form.elements.signalServer.value,
        remoteVideo: remoteVideo,
      });
    };
  </script>

</body>
</html>
